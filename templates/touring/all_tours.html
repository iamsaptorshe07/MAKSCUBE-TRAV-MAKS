{% extends 'basetemplate.html' %}
{% load static %}

<!-- Stylesheets starts-->
{% block stylesheets %}

<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<style>
    p{
        margin: 0;
    }
    .tourTypeSearch{
        display: flex;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
        padding: 20px 0;
        margin-top: 30px;
        border-top: 1px solid rgba(0,0,0,.64);
        border-bottom: 1px solid rgba(0,0,0,.64);
    }
    .tourTypeSearch span{
        margin: 0 15px;
        width: auto;
        height: auto;
        border-radius: 25px;
        padding: 2px 10px;
        border: 1px solid rgba(0,0,0,.64);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 500;
    }
    .tourTypeSearch span:hover{
        color: #fff;
        background-color: #EC5B24;
        border-color: #EC5B24;
    }
    .tourTypeSearch span.active{
        color: #fff;
        background-color: #EC5B24;
        border-color: #EC5B24;
    }
    #tours{
        margin-top: 30px;
        position: relative;
    }
    #tours .selectbg{
        height: 35px;
        align-items: center;
        justify-content: center;
        display: flex;
        position: absolute;
        top: 0;
        right: 0;
    }
    #tours .selectbg select{
        background-color: #e6edf3;
        outline: none!important;
        border: none;
    }
    .tours{
        margin-top: 60px;
        position: relative;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
        align-items: center;
        perspective: 10000px;
    }
    .tour{
        margin: 15px 0 55px 0;
        width: 280px;
        height: 375px;
        background-color: #ffffff;
        border-radius: 4px;
        border-top-left-radius: 50%;
        transition: .2s;
    }
    .tour .imgbg{
        position: relative;
        top: 0;
        left: 0;
        height: 260px;
        width: 280px;
        border-radius: 4px 4px 0 0;
        border-top-left-radius: 50%;
    }
    .tour .imgbg img{
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border-radius: 4px 4px 0 0;
        z-index: 2;
        transition: 0.6s;
    }
    .tour .imgbg span{
        z-index: 1;
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 35px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: rgb(5, 26, 95);
        border: 1px solid rgba(0,0,0,.38);
    }
    .tour .imgbg span a{
        color: #ffffff;
    }
    .tour .content{
        width: 280px;
        height: 115px;
        position: relative;
        top: 0;
        left: 0;
        border: 1px solid rgba(0,0,0,.38);
        border-radius: 0 0 4px 4px;
    }
    .tour:hover{
        box-shadow: 2px 2px rgba(0,0,0,.38);
    }
    .tour:hover .imgbg img{
        transform: translateY(-35px);
        border-top-left-radius: 50%;
    }
    .tour .content div{
        width: 100%;
        padding: 1px 10px;
        display: flex;
        font-size: 16px;
        color:rgba(0,0,0,.38);
        align-items: center;
        justify-content: space-between;
    }
    .tour .content .con1{
        font-size: 20px;
        font-weight: bold;
        color: rgb(255 43 61 / 68%);
    }
    .tour .content .con2{
        color: black;
    }
    .stars{
        position: absolute;
        top: 0;
        left: 0;
    }
    .stars ul{
        margin: 0;
        list-style: none;
        transition: 0.6s;
    }
    .stars ul li{
        margin: 0;
    }
    .stars ul li i{
        color: rgb(5, 26, 95);
        font-size: 22px;
        transition: 0.6s;
    }
    .tour:hover .stars ul{
        transform: translateX(-10px);   
    }
    .tour:hover .stars ul li:nth-child(1) i{
        transform: translate(130px,-60px);   
    }
    .tour:hover .stars ul li:nth-child(2) i{
        transform: translate(90px,-80px);   
    }
    .tour:hover .stars ul li:nth-child(3) i{
        transform: translate(51px,-90px);   
    }
    .tour:hover .stars ul li:nth-child(4) i{
        transform: translate(19px,-90px);   
    }
    .tour:hover .stars ul li:nth-child(5) i{
        transform: translate(0px,-80px);
    }
    .noMatchFound{
        position: absolute;
        display: none;
    }
    .searchbtn{
        width: 150px;
        padding: 2px 0;
        border-radius: 4px;
        background-color: #EC5B24;
        color: white;
    }
</style>
{% endblock %}
<!--Stylesheets Ends -->
<!-- Main content starts -->
{% block body %}
<main class="pt-5">
    <div class="container">
        <div class="row">
            <form class="col-lg-12" id="searchTour" action="" method="GET" onsubmit="return check1();">
                <div class="row">
                    <div class="col-md-6">
                        <p>Starting From :</p>
                        <input type="text" class="form-control" name="startLocSearch" id="startLocSearch"
                        placeholder="Enter Stating Point" required />
                    </div>
                    <div class="col-md-6">
                        <p>Visiting To :</p>
                        <input type="text" class="form-control" name="endLocSearch" id="endLocSearch"
                        placeholder="Enter Visiting Point" required />
                    </div>
                </div><br>
                <div class="row">
                    <div class="col-md-4">
                        <p>Departure after :</p>
                        <input type="text" class="form-control" name="startDateSearch" id="startDateSearch"
                        placeholder="Enter Stating Date" required />
                        <p>Returning within :</p>
                        <input type="text" class="form-control" name="endDateSearch" id="endDateSearch"
                        placeholder="Enter Ending Date" required />
                    </div>
                    <div class="col-md-4 d-flex justify-content-center flex-column">
                        <p>
                            <label for="amount">Price range:</label><br>
                            <input type="text" id="amount" readonly 
                            style="border:0; color:rgb(255 43 61 / 68%); font-weight:bold;">
                        </p>
                        <div id="slider-range"></div>
                    </div>
                    <div class="col-md-4 d-flex justify-content-around flex-column align-items-center">
                        <div class="w-100">
                            <label>Select Tour Duration (Date)</label>
                            <input type="number" class="form-control" placeholder="Tour Duration" min="2">
                        </div>
                        <button type="submit" class="searchbtn mt-3">Search</button>
                    </div>
                </div>
            </form>
            <div class="col-lg-12 tourTypeSearch">
                <span class="list active" data-filter="all">All Tour</span>
                <span class="list" data-filter="solo">Solo Tour</span>
                <span class="list" data-filter="friendly">Friendly Tour</span>
                <span class="list" data-filter="family">Family Tour</span>
                <span class="list" data-filter="couple">Couple Tour</span>
            </div>
            <div class="col-lg-12" id="tours">
                <span class="selectbg mb-5">
                    <form action="" method="GET" id="sortTour">
                        <select id="tourDetailsSelect" class="form-control" onchange="this.form.submit()">
                            <option value="popular">Popular</option>
                            <option value="PriceLH">Price (Low to High)</option>
                            <option value="PriceHL">Price (High to Low)</option>
                            <option value="tdLH">Tour Duration (Low to High)</option>
                            <option value="tdHL">Price (High to Low)</option>
                        </select>
                    </form>
                </span>
                <div class="tours">
                    <div class="noMatchFound">No Match Found</div>
                    <div class="tour solo" data-ratting="4.5">
                        <div class="stars">
                            <ul>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                            </ul>
                        </div>
                        <div class="imgbg">
                            <img src="{% static 'img/solo.jpg' %}" alt="">
                            <span><a href="#">Know More</a></span>
                        </div>
                        <div class="content">
                            <div class="con1">Exploring Darjeeling</div>
                            <div class="con2">
                                <p>
                                    Kolkata -> Darjeeling
                                </p>
                                <p>340$</p>
                            </div>
                            <div class="con3">25 Dec 2020  ->  4 Jan 2021</div>
                            <div class="con4">(Book before 20 Dec 2020)</div>
                        </div>
                    </div>
                    <div class="tour couple" data-ratting="4">
                        <div class="stars">
                            <ul>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                            </ul>
                        </div>
                        <div class="imgbg">
                            <img src="{% static 'img/solo.jpg' %}" alt="">
                            <span><a href="#">Know More</a></span>
                        </div>
                        <div class="content">
                            <div class="con1">Exploring Darjeeling</div>
                            <div class="con2">
                                <p>
                                    Kolkata -> Darjeeling
                                </p>
                                <p>320$</p>
                            </div>
                            <div class="con3">25 Dec 2020  ->  4 Jan 2021</div>
                            <div class="con4">(Book before 20 Dec 2020)</div>
                        </div>
                    </div>
                    <div class="tour family" data-ratting="3.9">
                        <div class="stars">
                            <ul>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                            </ul>
                        </div>
                        <div class="imgbg">
                            <img src="{% static 'img/solo.jpg' %}" alt="">
                            <span><a href="#">Know More</a></span>
                        </div>
                        <div class="content">
                            <div class="con1">Exploring Darjeeling</div>
                            <div class="con2">
                                <p>
                                    Kolkata -> Darjeeling
                                </p>
                                <p>286$</p>
                            </div>
                            <div class="con3">25 Dec 2020  ->  4 Jan 2021</div>
                            <div class="con4">(Book before 20 Dec 2020)</div>
                        </div>
                    </div>
                    <div class="tour friendly" data-ratting="3">
                        <div class="stars">
                            <ul>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                            </ul>
                        </div>
                        <div class="imgbg">
                            <img src="{% static 'img/solo.jpg' %}" alt="">
                            <span><a href="#">Know More</a></span>
                        </div>
                        <div class="content">
                            <div class="con1">Exploring Darjeeling</div>
                            <div class="con2">
                                <p>
                                    Kolkata -> Darjeeling
                                </p>
                                <p>230$</p>
                            </div>
                            <div class="con3">25 Dec 2020  ->  4 Jan 2021</div>
                            <div class="con4">(Book before 20 Dec 2020)</div>
                        </div>
                    </div>
                    <div class="tour friendly" data-ratting="2.1">
                        <div class="stars">
                            <ul>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                            </ul>
                        </div>
                        <div class="imgbg">
                            <img src="{% static 'img/solo.jpg' %}" alt="">
                            <span><a href="#">Know More</a></span>
                        </div>
                        <div class="content">
                            <div class="con1">Exploring Darjeeling</div>
                            <div class="con2">
                                <p>
                                    Kolkata -> Darjeeling
                                </p>
                                <p>200$</p>
                            </div>
                            <div class="con3">25 Dec 2020  ->  4 Jan 2021</div>
                            <div class="con4">(Book before 20 Dec 2020)</div>
                        </div>
                    </div>
                    <div class="tour solo" data-ratting="2">
                        <div class="stars">
                            <ul>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                            </ul>
                        </div>
                        <div class="imgbg">
                            <img src="{% static 'img/solo.jpg' %}" alt="">
                            <span><a href="#">Know More</a></span>
                        </div>
                        <div class="content">
                            <div class="con1">Exploring Darjeeling</div>
                            <div class="con2">
                                <p>
                                    Kolkata -> Darjeeling
                                </p>
                                <p>150$</p>
                            </div>
                            <div class="con3">25 Dec 2020  ->  4 Jan 2021</div>
                            <div class="con4">(Book before 20 Dec 2020)</div>
                        </div>
                    </div>
                    <div class="tour couple" data-ratting="1.7">
                        <div class="stars">
                            <ul>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                            </ul>
                        </div>
                        <div class="imgbg">
                            <img src="{% static 'img/solo.jpg' %}" alt="">
                            <span><a href="#">Know More</a></span>
                        </div>
                        <div class="content">
                            <div class="con1">Exploring Darjeeling</div>
                            <div class="con2">
                                <p>
                                    Kolkata -> Darjeeling
                                </p>
                                <p>120$</p>
                            </div>
                            <div class="con3">25 Dec 2020  ->  4 Jan 2021</div>
                            <div class="con4">(Book before 20 Dec 2020)</div>
                        </div>
                    </div>
                    <div class="tour family" data-ratting="1">
                        <div class="stars">
                            <ul>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                                <li><i class="fa fa-star" aria-hidden="true"></i></li>
                            </ul>
                        </div>
                        <div class="imgbg">
                            <img src="{% static 'img/solo.jpg' %}" alt="">
                            <span><a href="#">Know More</a></span>
                        </div>
                        <div class="content">
                            <div class="con1">Exploring Darjeeling</div>
                            <div class="con2">
                                <p>
                                    Kolkata -> Darjeeling
                                </p>
                                <p>100$</p>
                            </div>
                            <div class="con3">25 Dec 2020  ->  4 Jan 2021</div>
                            <div class="con4">(Book before 20 Dec 2020)</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
<script src="https://code.jquery.com/jquery-3.5.1.js" 
    integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" 
    crossorigin="anonymous">
</script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
    $('.tour').hover(function(){
        $('.stars ul li i').removeClass('fa-star');
        $('.stars ul li i').removeClass('fa-star-o');
        $('.stars ul li i').removeClass('fa-star-half-o');
        var ratting=$(this).attr('data-ratting');
        ratting=parseFloat(ratting);
        var x=parseInt(ratting);
        if(x==4){
            if(ratting>4){
                $('.stars ul li i').addClass('fa-star');
                $('.stars ul li:nth-child(1) i').addClass('fa-star-half-o');
            }
            else{
                $('.stars ul li i').addClass('fa-star');
                $('.stars ul li:nth-child(1) i').addClass('fa-star-o');
            }
        }
        if(x==3){
            if(ratting>3){
                $('.stars ul li i').addClass('fa-star');
                $('.stars ul li:nth-child(2) i').addClass('fa-star-half-o');
                $('.stars ul li:nth-child(1) i').addClass('fa-star-o');
            }
            else{
                $('.stars ul li i').addClass('fa-star');
                $('.stars ul li:nth-child(2) i').addClass('fa-star-o');
                $('.stars ul li:nth-child(1) i').addClass('fa-star-o');
            }
        }
        if(x==2){
            if(ratting>2){
                $('.stars ul li i').addClass('fa-star');
                $('.stars ul li:nth-child(3) i').addClass('fa-star-half-o');
                $('.stars ul li:nth-child(1) i').addClass('fa-star-o');
                $('.stars ul li:nth-child(2) i').addClass('fa-star-o');
            }
            else{
                $('.stars ul li i').addClass('fa-star');
                $('.stars ul li:nth-child(3) i').addClass('fa-star-o');
                $('.stars ul li:nth-child(1) i').addClass('fa-star-o');
                $('.stars ul li:nth-child(2) i').addClass('fa-star-o');
            }
        }
        if(x==1){
            if(ratting>1){
                $('.stars ul li i').addClass('fa-star-o');
                $('.stars ul li:nth-child(4) i').addClass('fa-star-half-o');
                $('.stars ul li:nth-child(5) i').addClass('fa-star');
                $('.stars ul li:nth-child(5) i').removeClass('fa-star-o');
            }
            else{
                $('.stars ul li i').addClass('fa-star-o');
                $('.stars ul li:nth-child(4) i').addClass('fa-star-o');
                $('.stars ul li:nth-child(5) i').addClass('fa-star');
                $('.stars ul li:nth-child(5) i').removeClass('fa-star-o');
            }
        }
    });
    
    $(function(){
        $('.list').click(function(){
            const value=$(this).attr('data-filter');
            if(value == 'all'){
                $('.tour').not('.'+value).show('100');
            }
            else{
                $('.tour').not('.'+value).hide('100');
                $('.tour').filter('.'+value).show('100');
            }
        })
        $('.list').click(function(){
            $(this).addClass('active').siblings().removeClass('active');
        })
    });
    
    $(function(){
        var rattings=[];
        var prices=[];
        document.querySelectorAll('.tour').forEach(function(tour){
            var ratting=tour.getAttribute('data-ratting');
            ratting=parseFloat(ratting);
            rattings.push(ratting);
        });
        document.querySelectorAll('.con2 p:nth-child(2)').forEach(function(el){
            var price=el.innerHTML;
            price=price.substr(0,price.length-1);
            price=parseFloat(price);
            prices.push(price);
        });
        // console.log(prices,rattings);
    });

    $( function() {
        $( "#slider-range" ).slider({
            range: true,
            min: 0,
            max: 500,
            values: [ 75, 300 ],
            slide: function( event, ui ) {
                $( "#amount" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
            }
        });
        $( "#amount" ).val( "$" + $( "#slider-range" ).slider( "values", 0 ) +
            " - $" + $( "#slider-range" ).slider( "values", 1 ) );
    });

    $(function(){
        var mindate= new Date();
		var tomorrowReal = new Date(mindate.getTime() + (24 * 60 * 60 * 1000));
		$('#startDateSearch').datepicker({
			numberOfMonths: 1,
			showAnim: 'drop',
			minDate: mindate,
			dateFormat: 'dd/mm/yy',
			onSelect: function (sd) {
				var d1=sd.substr(0,2);
				var d2=sd.substr(3,2);
				var d3=sd.substr(6,4);
				sd=d2+'/'+d1+'/'+d3;
				var k = new Date(sd);

				console.log(k,k.getTime());
				var tomorrow = new Date(k.getTime() + (24 * 60 * 60 * 1000));
				$('#endDateSearch').datepicker("option", "minDate", tomorrow);
			}
		});
		$('#endDateSearch').datepicker({
			numberOfMonths: 1,
			showAnim: 'drop',
			minDate: mindate,
			dateFormat: 'dd/mm/yy',
			onSelect: function (sd) {
				var d1=sd.substr(0,2);
				var d2=sd.substr(3,2);
				var d3=sd.substr(6,4);
				sd=d2+'/'+d1+'/'+d3;
				var k = new Date(sd);

				console.log(k,k.getTime());
				var yesterday = new Date(k.getTime() - (24 * 60 * 60 * 1000));
				$('#startDateSearch').datepicker("option", "maxDate", yesterday);
			}
		});
    });

    function check1() {
        return true;
    }
</script>
{% endblock body %}
<!--Main content Ends-->